.. metadata-placeholder

   :authors: - Claus Christensen
             - Yuri Chornoivan
             - Ttguy (https://userbase.kde.org/User:Ttguy)
             - Bushuev (https://userbase.kde.org/User:Bushuev)

   :license: Creative Commons License SA 4.0

.. _alpha_shapes:

Alpha Shapes
============

.. contents::

This is the `Frei0r alphaspot <https://www.mltframework.org/plugins/FilterFrei0r-alphaspot/>`_ MLT filter, see also `Frei0r-alphaspot readme <https://github.com/dyne/frei0r/blob/master/src/filter/alpha0ps/readme>`_ file.

.. image:: /images/Alpha_shapes.png
   :width: 500px
   :align: left
   :alt: Alpha_shapes

Use this in combination with a :ref:`composite` to place areas of transparency onto an overlaying clip such that the underlying clip shows through in places defined by geometric shapes. By default, the area of transparency is outside the shape that is drawn. Inside the shape is an area of opacity where the overlaying clip is visible.

Shape Options
-------------

This controls the shape of the area of opacity that the effect will create.

Shape options are :menuselection:`Rectangle`, :menuselection:`Ellipse`, :menuselection:`Triangle`, and :menuselection:`Diamond`.

Tilt
----

This controls the angle the shape appears on the screen. The units are in 1000ths of a full rotation. Eg, a factor of 250 is one-quarter of a circle turn and 500 is a 180 turn. I.e., 1000 tilt units = 360 degrees.

Position X and Y
----------------

This defines the position of the shape on the screen.

Size X and Y
------------

Defines the size of the shape.

Transition Width
----------------

Defines the width of a border on the shape where the transparency grades from inside to outside the shape.

Operations
----------

Operations define what is to happen when you have more than one Alpha effect on the clip.

Operations are :menuselection:`Write On Clear`, :menuselection:`Max`, :menuselection:`Min`, :menuselection:`Add`, and :menuselection:`Subtract`:

* Write On Clear = existing alpha mask is overwritten
* Max = maximum( existing alpha mask, mask generated by this filter)
* Min = minimum(existing alpha mask, mask generated by this filter)
* Add = existing alpha mask + mask generated by this filter
* Subtract = existing alpha mask - mask generated by this filter

See the worked examples below to understand what these operations do.

Min and Max Operations - Worked examples
----------------------------------------

.. image:: /images/Example_composite_transition.png
   :align: left
   :alt: Example_composite_transition

These examples are performed on a simple composite transition with a video file on Video track 1 and a color clip (yellow) on Video track 2.

Alpha shapes effect draws areas of opacity onto the image. The addition of this filter (with the default settings of Min = 0 and Max =1000) makes the whole frame transparent except for an area of opaqueness where the top image can be seen.

The Max and Min controls adjust the opacity of the image inside and outside of the shape respectively. A setting of 1000 is 100% opaque. A setting of zero is 0% opaque (i.e., 100% transparent).

**Max control**

.. image:: /images/Alpha_shapes_max_control2.png
   :align: left
   :alt: Alpha_shapes_max_control2

The Max control regulates how opaque it is inside the shape. At Max = 1000 it is completely opaque inside the shape and nothing of the background image shows through.

.. image:: /images/Alpha_shapes_max_control.png
   :align: left
   :alt: Alpha_shapes_max_control

At Max = 500 it is semi-transparent inside the shape and you can see the background bleeding through.

.. image:: /images/Alpha_shapes_max_control3.png
   :align: left
   :alt: Alpha_shapes_max_control3

At Max = 0 inside the shape is completely transparent - the same as the rest of the foreground image - and you can see all background.

**Min Control**

.. image:: /images/Alpha_shapes_min_control.png
   :align: left
   :alt: Alpha_shapes_min_control

The Min control adjusts how opaque it is outside the shape. When Min = 0 outside the shape is completely transparent (opacity of zero) and at Min = 500 we see something of the foreground appears outside the shape.

.. image:: /images/Alpha_shapes_min_control2.png
   :align: left
   :alt: Alpha_shapes_min_control2

At Min = 1000 the opacity outside the shape is 100% and nothing of the background appears.

**Combining Alpha Shapes - Operations**

.. image:: /images/Triangle_alpha_shape.png
   :align: left
   :alt: Triangle_alpha_shape

In this example, I have a Triangle alpha shape defined as shown and this is at the top of the effect stack with operation :menuselection:`Write on clear`.

.. image:: /images/Triangle_alpha_shape2.png
   :align: left
   :alt: Triangle_alpha_shape2

Which appears like this on its own.

.. image:: /images/Rectange_alpha_shape.png
   :align: left
   :alt: Rectange_alpha_shape

And I have Rectangle alpha shape as shown which is at the bottom of the effect stack. Note the Max = 500 - i.e., 50% opacity inside the rectangle.

.. image:: /images/Rectange_alpha_shape2.png
   :align: left
   :alt: Rectange_alpha_shape2

Which appears like this when on its own.

In the images below I demonstrate the effect of different alpha operations on the Rectangle alpha shape.

.. image:: /images/Write_on_clear.png
   :align: left
   :alt: Write_on_clear

Write on Clear - the existing alpha mask is overwritten

.. image:: /images/Operation_add.png
   :align: left
   :alt: Operation_add

add = existing alpha mask + mask generated by this filter.

Note that areas with 1000 + 500 opacity would be 150% opaque. But you cant get 150% opaque so they look the same as the 100% opaque areas.

.. image:: /images/Operation_subtract.png
   :align: left
   :alt: Operation_subtract

subtract = existing alpha mask - mask generated by this filter.

Note that areas with 0 - 500 opacity would be minus 50% opaque. But you cant get -50% opaque so they look the same as the 0% opaque areas.

.. image:: /images/Operation_max.png
   :align: left
   :alt: Operation_max

max = maximum( <existing alpha mask> , <mask generated by this filter>)

.. image:: /images/Operation_min.png
   :align: left
   :alt: Operation_min

min = minimum( <existing alpha mask> , <mask generated by this filter>)

